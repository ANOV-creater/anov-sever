<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUNO HAIR - Booking</title>
    
    <!-- Instagram Embed Script -->
    <script async defer src="https://www.instagram.com/embed.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* Custom Font Loading */
        @font-face {
            font-family: 'SansSerifFLF';
            src: url('/assets/font/SansSerifFLF.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'SansSerifFLF';
            src: url('/assets/font/SansSerifFLF-Demibold.otf') format('opentype');
            font-weight: 600;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'SansSerifFLF';
            src: url('/assets/font/SansSerifBldFLF.otf') format('opentype');
            font-weight: 700;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'SansSerifFLF';
            src: url('/assets/font/SansSerifExbFLF.otf') format('opentype');
            font-weight: 900;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SansSerifFLF', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #ffffff;
            overflow-x: hidden;
            height: 200vh;
            -webkit-font-smoothing: antialiased;
        }

        /* Intro Screen */
        .intro-screen {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #ffffff;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .logo {
            width: auto;
            height: 60px;
            max-width: 280px;
            object-fit: contain;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translateY(0);
        }

        .logo.moved {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            height: 40px;
            z-index: 1000;
        }

        .from-anov {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 0.9rem;
            color: #8e8e93;
            font-weight: 400;
            line-height: 1.2;
            transition: opacity 0.4s ease;
        }

        .from-anov strong {
            font-weight: 700;
            color: #1d1d1f;
        }

        .from-anov.intro {
            opacity: 1;
        }

        .from-anov.hidden {
            opacity: 0;
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0.7;
            transition: opacity 0.4s ease;
        }

        .scroll-indicator.hidden {
            opacity: 0;
        }

        .scroll-text {
            font-size: 0.8rem;
            color: #a1a1a6;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .scroll-arrow {
            width: 14px;
            height: 14px;
            border-right: 1px solid #a1a1a6;
            border-bottom: 1px solid #a1a1a6;
            transform: rotate(45deg);
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: rotate(45deg) translateY(0); }
            50% { transform: rotate(45deg) translateY(8px); }
        }

        /* Selection Screen */
        .selection-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0 32px;
            background: #ffffff;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 50;
        }

        .selection-screen.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Welcome Section */
        .welcome-section {
            text-align: center;
            margin-bottom: 44px;
        }

        .wave-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 24px auto;
            display: block;
            animation: wave 2.5s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(15deg); }
            75% { transform: rotate(-8deg); }
        }

        .welcome-text {
            font-size: 1.4rem;
            color: #1d1d1f;
            font-weight: 600;
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        /* Button Container */
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            max-width: 340px;
            margin-bottom: 40px;
        }

        .btn {
            padding: 18px 28px;
            border: 1px solid #d1d1d6;
            border-radius: 25px;
            background: #ffffff;
            color: #1d1d1f;
            font-size: 1rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.25s ease;
            text-align: center;
            text-decoration: none;
            display: block;
            letter-spacing: -0.01em;
            -webkit-tap-highlight-color: transparent;
        }

        .btn:hover {
            background: #f8f8f8;
            border-color: #1d1d1f;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(29, 29, 31, 0.08);
        }

        .btn:active {
            transform: translateY(0);
            background: #f0f0f0;
            box-shadow: 0 2px 8px rgba(29, 29, 31, 0.06);
        }

        /* Terms Section */
        .terms-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .terms {
            text-align: center;
            font-size: 0.75rem;
            color: #8e8e93;
            margin-bottom: 12px;
            line-height: 1.4;
            max-width: 300px;
            font-weight: 400;
        }

        .terms a {
            color: #1d1d1f;
            text-decoration: none;
            font-weight: 500;
        }

        .terms a:hover {
            text-decoration: underline;
        }
        
        .shield-icon {
            width: 16px;
            height: 16px;
            opacity: 0.6;
            margin-top: 4px;
        }

        /* Selection Screen ANOV */
        .selection-screen .from-anov {
            position: absolute;
            bottom: 60px;
            opacity: 1;
        }

        /* Step1 Screen Styles */
        .step1-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
            z-index: 310;
            transform: translateX(100%);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            display: flex;
            flex-direction: column;
        }
        
        .step1-screen.active {
            transform: translateX(0);
        }
        
        /* Hide selection screen when Step1 is active */
        .step1-screen.active ~ .selection-screen {
            opacity: 0;
            pointer-events: none;
        }
        
        .step1-header {
            display: flex;
            align-items: center;
            padding: 60px 24px 24px 24px;
            background: #ffffff;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .back-btn {
            background: none;
            border: none;
            padding: 8px;
            margin-right: 16px;
            cursor: pointer;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        
        .back-btn:hover {
            background-color: #f5f5f7;
        }
        
        .step1-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0;
            flex: 1;
            letter-spacing: -0.02em;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .designers-content {
            flex: 1;
            padding: 0 24px 20px 24px;
        }
        
        .designer-group {
            margin-bottom: 40px;
        }
        
        .group-title {
            font-size: 1.1rem;
            font-weight: 500;
            color: #1d1d1f;
            margin: 0 0 20px 0;
            text-align: left;
            letter-spacing: -0.01em;
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
            position: relative;
            padding-left: 8px;
        }
        
        .group-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 14px;
            background-color: #000000;
            border-radius: 1.5px;
        }
        
        .designers-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 15px;
            padding: 0;
            margin: 0 auto;
            max-width: 500px;
        }
        
        .designer-card {
            background: #ffffff;
            border: 0.5px solid #e5e5ea;
            border-radius: 12px;
            padding: 24px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            aspect-ratio: 1 / 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.01);
            height: 100%;
            box-sizing: border-box;
        }
        
        .designer-card:hover {
            border-color: #c5c5ca;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
            background-color: #f9f9f9;
        }
        
        .designer-card.selected {
            border-color: #0071e3;
            background: rgba(0, 113, 227, 0.04);
            box-shadow: 0 2px 12px rgba(0, 113, 227, 0.12);
        }
        
        .designer-card.selected .designer-name {
            color: #0071e3;
        }
        
        .designer-card .designer-avatar {
            width: 38px;
            height: 38px;
            margin: 0 auto 10px auto;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: none;
            border: none;
            display: block;
        }
        
        .avatar-placeholder {
            width: 100%;
            height: 100%;
            background: #e5e5e7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            overflow: hidden;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: #8e8e93;
        }
        
        .avatar-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: top center;
            border-radius: 50%;
        }
        
        .designer-card .designer-info {
            text-align: center;
            padding: 0;
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            position: relative;
            margin-top: 0;
        }
        
        .designer-name {
            font-size: 0.65rem;
            font-weight: 500;
            color: #1d1d1f;
            margin-bottom: 3px;
            letter-spacing: -0.01em;
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.1;
            display: block;
            width: 100%;
            overflow: visible;
        }
        
        .designer-instagram {
            font-size: 0.45rem;
            color: #8e8e93;
            font-weight: 400;
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
            letter-spacing: -0.01em;
            position: relative;
            line-height: 1;
            opacity: 0.7;
            display: block;
            width: 100%;
            overflow: visible;
        }
        
        .designer-instagram::before {
            content: '@';
            opacity: 0.7;
        }
        
        /* Step1 Continue Button */
        .step1-footer {
            position: sticky;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            background: #ffffff;
            padding: 20px 24px 34px 24px;
            border-top: 1px solid #e5e5e7;
            z-index: 999;
            box-sizing: border-box;
            margin-top: auto;
        }
        
        .continue-btn {
            width: 100%;
            padding: 16px;
            background: #d1d1d6;
            color: #8e8e93;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: not-allowed;
            transition: all 0.3s ease;
        }
        
        .continue-btn:enabled {
            background: #1d1d1f;
            color: #ffffff;
            cursor: pointer;
        }
        
        .continue-btn:enabled:hover {
            background: #000000;
            transform: translateY(-1px);
        }

        /* Step1.5 Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .designer-modal {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            border-radius: 20px 20px 0 0;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .modal-overlay.active .designer-modal {
            transform: translateY(0);
        }
        
        .modal-handle {
            width: 40px;
            height: 4px;
            background: #d1d1d6;
            border-radius: 2px;
            margin: 12px auto 20px;
            cursor: grab;
        }
        
        .modal-handle:active {
            cursor: grabbing;
        }
        
        .modal-header {
            padding: 0 24px 24px;
            border-bottom: 1px solid #e5e5e7;
        }
        
        .designer-profile {
            display: flex;
            gap: 16px;
            align-items: flex-start;
        }
        
        .designer-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .designer-info {
            flex: 1;
        }
        
        .designer-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1d1d1f;
            margin: 0 0 4px 0;
        }
        
        .designer-handle {
            color: #8e8e93;
            margin: 0 0 16px 0;
        }
        
        .designer-stats {
            display: flex;
            gap: 24px;
            margin-bottom: 16px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            color: #1d1d1f;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #8e8e93;
        }
        
        .follow-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 8px 24px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .follow-btn:hover {
            background: #0056CC;
        }
        
        .modal-content {
            padding: 24px;
        }
        
        /* Instagram Embed Section */
        .instagram-section {
            padding: 0;
        }
        
        .section-header {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .section-header h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 8px;
        }
        
        .section-header p {
            font-size: 0.9rem;
            color: #666;
            margin: 0;
        }
        
        .instagram-embed-container {
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: #f8f9fa;
            overflow: hidden;
        }
        
        .instagram-embed-container .loading-placeholder {
            text-align: center;
            color: #666;
        }
        
        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #e3e3e3;
            border-top: 3px solid #405DE6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 12px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Instagram 임베드가 로드된 후 스타일 */
        .instagram-embed-container blockquote.instagram-media {
            margin: 0 !important;
            max-width: 100% !important;
            border-radius: 12px;
            box-shadow: none !important;
        }
        
        /* Instagram Fallback 스타일 */
        .instagram-fallback {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .fallback-icon {
            margin-bottom: 16px;
            opacity: 0.6;
        }
        
        .instagram-fallback h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .instagram-fallback p {
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .instagram-fallback small {
            font-size: 0.8rem;
            color: #999;
        }
        
        .modal-footer {
            padding: 24px;
            border-top: 1px solid #e5e5e7;
            background: #ffffff;
            position: sticky;
            bottom: 0;
        }
        
        .modal-continue-btn {
            width: 100%;
            padding: 16px;
            background: #1d1d1f;
            color: #ffffff;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-continue-btn:hover {
            background: #000000;
            transform: translateY(-1px);
        }
        
        /* Mobile Responsive */
        @media (max-width: 480px) {
            .logo {
                height: 50px;
                max-width: 240px;
            }
            
            .logo.moved {
                height: 32px;
                top: 70px;
            }
            
            .wave-icon {
                width: 40px;
                height: 40px;
            }
            
            .welcome-text {
                font-size: 1.25rem;
            }
            
            .btn {
                padding: 16px 24px;
                font-size: 0.95rem;
            }
            
            .terms {
                font-size: 0.7rem;
                max-width: 280px;
            }
            
            .selection-screen {
                padding: 0 24px;
            }
        }

        @media (max-width: 375px) {
            .logo {
                height: 45px;
                max-width: 220px;
            }
            
            .logo.moved {
                height: 28px;
                top: 60px;
            }
            
            .wave-icon {
                width: 36px;
                height: 36px;
            }
            
            .welcome-text {
                font-size: 1.1rem;
            }
        }
        
        /* 디자이너 소셜 정보 */
        .designer-social {
            display: flex;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            margin: 20px 0;
            border-radius: 12px;
        }
        
        .designer-social .designer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ddd;
            margin-right: 15px;
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
        }
        
        .designer-social .designer-info {
            flex: 1;
        }
        
        .designer-social .designer-name {
            font-size: 16px;
            font-weight: 700;
            color: #000;
            margin-bottom: 4px;
        }
        
        .designer-social .designer-instagram {
            font-size: 14px;
            color: #666;
        }
        
        .designer-social .designer-stats {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .designer-social .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .designer-social .stat-number {
            font-size: 14px;
            font-weight: 700;
            color: #000;
        }
        
        .designer-social .stat-label {
            font-size: 12px;
            color: #666;
        }
        
        /* 예약 버튼 스타일 */
        .reservation-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .reservation-btn:hover {
            background: #0056b3;
        }
        
        /* 모달 관련 CSS 삭제됨 */
        
        .designer-profile {
            max-width: 100%;
            margin: 0 auto;
            height: 200px;
            background-size: cover;
            background-position: top center;
            position: relative;
            overflow: hidden;
        }
        
        /* 메인 프로필 이미지 */
        .main-profile-image {
            width: 100%;
            aspect-ratio: 0.75;
            margin-bottom: 18px;
            border-radius: 0;
            overflow: hidden;
        }
        
        .profile-img-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .profile-img-placeholder::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 80px;
            background: #d0d0d0;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* 통계 및 아바타 섹션 */
        .stats-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding: 0 20px;
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-number {
            font-size: 16px;
            font-weight: 700;
            color: #000;
            margin-bottom: 2px;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 12px;
            color: #8e8e93;
            font-weight: 400;
            line-height: 1;
        }
        
        .center-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid white;
            margin: 0 auto;
            position: relative;
            top: -45px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .avatar-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #d0d0d0 0%, #c0c0c0 100%);
        }
        
        /* 프로필 정보 */
        .profile-info {
            text-align: center;
        }
        
        .profile-name {
            font-size: 16px;
            font-weight: 700;
            color: #000;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            line-height: 1.2;
        }
        
        .verified-badge {
            color: #007AFF;
            font-size: 16px;
            font-weight: 700;
            line-height: 1;
        }
        
        .profile-handle {
            font-size: 13px;
            color: #8e8e93;
            font-weight: 400;
            line-height: 1;
        }
        
        /* 액션 버튼 */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .follow-btn, .reservation-btn {
            padding: 8px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            height: 32px;
            min-width: 120px;
        }
        
        .follow-btn {
            background: #007AFF;
            color: #ffffff;
        }
        
        .follow-btn:hover {
            background: #0056CC;
        }
        
        .reservation-btn {
            background: #007AFF;
            color: #ffffff;
        }
        
        .reservation-btn:hover {
            background: #0056CC;
        }
        
        /* 포트폴리오 그리드 */
        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
            margin-bottom: 20px;
        }
        
        .portfolio-item {
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .portfolio-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
            position: relative;
        }
        
        .right-item:nth-child(3n) .portfolio-placeholder {
            background: linear-gradient(135deg, #E6E6FA 0%, #DDA0DD 50%, #DA70D6 100%);
        }
        
        .recommendation-overlay {
            position: absolute;
            bottom: 8px;
            left: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 4px;
            padding: 4px 6px;
            text-align: center;
        }
        
        .rec-text {
            color: white;
            font-size: 9px;
            font-weight: 500;
            line-height: 1.1;
        }
        

        
        /* Step2 Screen Styles */
        .step2-screen {
            position: fixed;
            top: 0;
            left: 100vw;
            width: 100vw;
            height: 100vh;
            background: #ffffff;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .step2-screen.active {
            transform: translateX(-100vw);
        }
        
        .step2-header {
            display: flex;
            align-items: center;
            padding: 60px 24px 24px 24px;
            background: #ffffff;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .step2-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1d1d1f;
            margin: 0;
            flex: 1;
        }
        
        /* 선택된 디자이너 정보 */
        .selected-designer-info {
            padding: 20px;
            background: #ffffff;
            margin-bottom: 20px;
        }
        
        .designer-stats {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .stat-left, .stat-right {
            text-align: center;
            flex: 1;
        }
        
        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 2px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #8e8e93;
        }
        
        .designer-avatar-center {
            flex: 0 0 auto;
            margin: 0 20px;
        }
        
        .designer-avatar-img {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
            border: 3px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .designer-profile-info {
            text-align: center;
        }
        
        .designer-label {
            font-size: 12px;
            color: #8e8e93;
            margin-bottom: 4px;
        }
        
        .designer-name-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin-bottom: 4px;
        }
        
        .designer-name-text {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
        }
        
        .verified-badge {
            width: 16px;
            height: 16px;
        }
        
        .designer-handle {
            font-size: 14px;
            color: #8e8e93;
        }
        
        /* 날짜 선택 */
        .date-selector {
            padding: 0 20px;
            margin-bottom: 32px;
        }
        
        .date-options {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 4px 0;
        }
        
        .date-option {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid #d1d1d6;
            border-radius: 12px;
            background: #ffffff;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 60px;
        }
        
        .date-option.selected {
            background: #007AFF;
            border-color: #007AFF;
        }
        
        .date-option.selected .day-name,
        .date-option.selected .date-number {
            color: #ffffff;
        }
        
        .day-name {
            font-size: 12px;
            color: #8e8e93;
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .date-number {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
        }
        
        /* 시간 선택 */
        .time-selector {
            flex: 1;
            padding: 0 20px;
            margin-bottom: 100px;
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }
        
        .time-slot {
            padding: 16px 20px;
            border: 1px solid #d1d1d6;
            border-radius: 12px;
            background: #ffffff;
            font-size: 16px;
            font-weight: 500;
            color: #1d1d1f;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .time-slot:hover {
            background: #f8f8f8;
        }
        
        .time-slot.selected {
            background: #007AFF;
            border-color: #007AFF;
            color: #ffffff;
        }
        
        .time-slot.unavailable {
            background: #f8f8f8;
            color: #c7c7cc;
            cursor: not-allowed;
        }
        
        .portfolio-image {
            border-radius: 8px;
            aspect-ratio: 1;
            object-fit: cover;
            object-position: center;
            width: 100%;
            height: 100%;
        }

        /* Returning User Flow Screens */
        .step05-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transform: translateY(100%);
            transition: all 0.4s ease;
            z-index: 10;
        }
        
        .step05-screen.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .step05-welcome {
            font-size: 2rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .step05-description {
            font-size: 1rem;
            color: #6e6e73;
            text-align: center;
            margin-bottom: 3rem;
            line-height: 1.5;
            max-width: 300px;
        }
        
        .google-login-btn {
            background: #ffffff;
            border: 1px solid #d1d1d6;
            border-radius: 12px;
            padding: 16px 24px;
            font-size: 1rem;
            color: #1d1d1f;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .google-login-btn:hover {
            background: #f8f8f8;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .google-icon {
            width: 20px;
            height: 20px;
        }
        
        /* Returning Step1 Screen */
        .returning-step1-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #ffffff;
            opacity: 0;
            visibility: hidden;
            transform: translateY(100%);
            transition: all 0.4s ease;
            z-index: 10;
            overflow-y: auto;
        }
        
        .returning-step1-screen.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .returning-step1-header {
            padding: 60px 20px 40px;
            text-align: center;
        }
        
        .returning-welcome {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 0.5rem;
        }
        
        .returning-subtitle {
            font-size: 1.1rem;
            color: #6e6e73;
            margin-bottom: 3rem;
        }
        
        .previous-designer-card {
            background: #ffffff;
            border: 1px solid #e5e5e7;
            border-radius: 16px;
            padding: 24px;
            margin: 0 20px 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .previous-designer-info {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .previous-designer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background-size: cover;
            background-position: center;
            background-color: #f5f5f7;
        }
        
        .previous-designer-details h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 4px;
        }
        
        .previous-designer-stats {
            display: flex;
            gap: 16px;
            font-size: 0.9rem;
            color: #6e6e73;
        }
        
        .see-more-btn {
            background: #ffffff;
            border: 1px solid #d1d1d6;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 0.9rem;
            color: #1d1d1f;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 20px 2rem;
            width: calc(100% - 40px);
        }
        
        .see-more-btn:hover {
            background: #f8f8f8;
        }
        
        .continue-with-designer-btn {
            background: #1d1d1f;
            color: #ffffff;
            border: none;
            border-radius: 25px;
            padding: 16px 32px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 20px;
            width: calc(100% - 40px);
        }
        
        .continue-with-designer-btn:hover {
            background: #2d2d2f;
        }
        
        /* Returning Step3 Screen */
        .returning-step3-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #ffffff;
            opacity: 0;
            visibility: hidden;
            transform: translateY(100%);
            transition: all 0.4s ease;
            z-index: 10;
            overflow-y: auto;
        }
        
        .returning-step3-screen.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .returning-step3-header {
            padding: 60px 20px 30px;
            text-align: center;
        }
        
        .returning-step3-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 2rem;
        }
        
        .style-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 0 20px 2rem;
        }
        
        .style-thumbnail {
            aspect-ratio: 1;
            background-size: cover;
            background-position: center;
            background-color: #f5f5f7;
            border-radius: 8px;
        }
        
        .price-options {
            margin: 0 20px 2rem;
        }
        
        .price-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #e5e5e7;
        }
        
        .price-option:last-child {
            border-bottom: none;
        }
        
        .price-label {
            font-size: 1rem;
            color: #1d1d1f;
        }
        
        .price-value {
            font-size: 1rem;
            font-weight: 600;
            color: #1d1d1f;
        }
        
        .discount-badge {
            background: #ff3b30;
            color: #ffffff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .continue-to-booking-btn {
            background: #1d1d1f;
            color: #ffffff;
            border: none;
            border-radius: 25px;
            padding: 16px 32px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 2rem 20px 0;
            width: calc(100% - 40px);
        }
        
        .continue-to-booking-btn:hover {
            background: #2d2d2f;
        }
        
        .back-btn-returning {
            position: absolute;
            top: 60px;
            left: 20px;
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }
        
        .back-btn-returning:hover {
            background: #f5f5f7;
        }
    </style>
</head>
<body>
    <!-- Intro Screen -->
    <div class="intro-screen" id="introScreen">
        <img src="/assets/logos/JUNO new logo.png" alt="JUNO HAIR" class="logo" id="logo">
        
        <div class="scroll-indicator" id="scrollIndicator">

            <div class="scroll-arrow"></div>
        </div>
        
        <div class="from-anov intro" id="fromAnovIntro">
            from<br><strong>ANOV</strong>
        </div>
    </div>

    <!-- Selection Screen -->
    <div class="selection-screen" id="selectionScreen">
        <div class="welcome-section">
            <img src="/assets/logos/hand-waving.svg" alt="👋" class="wave-icon">
            <div class="welcome-text">"Have you visited us before?"</div>
        </div>
        
        <div class="button-container">
            <button class="btn" id="newUserBtn">I'm new here</button>
            <button class="btn" id="returningUserBtn">I've been here before</button>
        </div>
        
        <div class="terms-section">
            <div class="terms">
                By continuing, you agree to our<br><a href="#" id="termsLink">[Terms of Use]</a> and <a href="#" id="privacyLink">[Privacy Policy]</a>.
            </div>
            <img src="/assets/logos/shield.svg" alt="Security" class="shield-icon">
        </div>
        
        <div class="from-anov">
            from<br><strong>ANOV</strong>
        </div>
    </div>

    <!-- Step1 Screen (Designer Selection) -->
    <div class="step1-screen" id="step1Screen">
        <div class="step1-header">
            <button class="back-btn" id="backBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="#1d1d1f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h1 class="step1-title">Select the designer</h1>
        </div>
        
        <div class="designers-content">
            <!-- 디자이너 목록은 JavaScript로 동적 생성 -->
            <div id="designersContainer">
                <!-- 4층 디자이너 그룹 -->
                <div class="designer-group" id="floor4Designers">
                    <h2 class="group-title">4Floor NO.1 designer</h2>
                    <div class="designers-grid">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                </div>
                
                <!-- 3층 디자이너 그룹 -->
                <div class="designer-group" id="floor3Designers">
                    <h2 class="group-title">3Floor designer</h2>
                    <div class="designers-grid">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                </div>
                </div>
            </div>
            
            <!-- Step1 Continue Button -->
            <div class="step1-footer">
                <button class="continue-btn" id="continueBtn" disabled>
                    Continue
                </button>
            </div>

        </div>
    </div>
    
    <!-- Step 0.5 - Returning User Welcome Screen -->
    <div class="step05-screen" id="step05Screen">
        <div class="step05-welcome">Welcome back!</div>
        <div class="step05-description">
            이전 방문 정보를 복원하려면<br>Google 계정으로 로그인 해주세요
        </div>
        <button class="google-login-btn" id="googleLoginBtn">
            <svg class="google-icon" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Google로 로그인
        </button>
    </div>
    
    <!-- Returning Step1 - Previous Designer Screen -->
    <div class="returning-step1-screen" id="returningStep1Screen">
        <button class="back-btn-returning" id="backBtnReturning">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M15 18L9 12L15 6" stroke="#1d1d1f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <div class="returning-step1-header">
            <div class="returning-welcome">Welcome back, <span id="userNameSpan">User</span>!</div>
            <div class="returning-subtitle">Your designer</div>
        </div>
        
        <div class="previous-designer-card" id="previousDesignerCard">
            <div class="previous-designer-info">
                <div class="previous-designer-avatar" id="previousDesignerAvatar"></div>
                <div class="previous-designer-details">
                    <h3 id="previousDesignerName">Designer Name</h3>
                    <div class="previous-designer-stats">
                        <span id="previousDesignerFollowers">25.1M followers</span>
                        <span id="previousDesignerFollowing">1.1M following</span>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="see-more-btn" id="seeMoreDesignersBtn">
            See more designers
        </button>
        
        <button class="continue-with-designer-btn" id="continueWithDesignerBtn">
            Continue
        </button>
    </div>
    
    <!-- Returning Step3 - Style Selection Screen -->
    <div class="returning-step3-screen" id="returningStep3Screen">
        <button class="back-btn-returning" id="backBtnReturningStep3">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M15 18L9 12L15 6" stroke="#1d1d1f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <div class="returning-step3-header">
            <div class="returning-step3-title">Welcome to return</div>
        </div>
        
        <div class="previous-designer-card">
            <div class="previous-designer-info">
                <div class="previous-designer-avatar" id="step3DesignerAvatar"></div>
                <div class="previous-designer-details">
                    <h3 id="step3DesignerName">Designer Name</h3>
                    <div class="previous-designer-stats">
                        <span>More Response</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="style-gallery" id="styleGallery">
            <!-- Style thumbnails will be populated by JavaScript -->
        </div>
        
        <div class="price-options">
            <div class="price-option">
                <span class="price-label">your price</span>
                <span class="price-value">
                    ₩50,000 <span class="discount-badge">20% off</span>
                </span>
            </div>
            <div class="price-option">
                <span class="price-label">price</span>
                <span class="price-value">Not yet</span>
            </div>
        </div>
        
        <button class="continue-to-booking-btn" id="continueToBookingBtn">
            Continue
        </button>
    </div>
    
    <!-- 디자이너 상세 정보 불러오기 - Step2에 바로 표시 -->
    <script>
        function loadDesignerDetails(designerId) {
            fetch('/assets/designers/designers.json')
                .then(response => response.json())
                .then(data => {
                    // 3층, 4층 모든 디자이너 합치기
                    const allDesigners = [...data['3F'], ...data['4F']];
                    
                    // 선택된 디자이너 찾기
                    const designer = allDesigners.find(d => d.id === designerId);
                    
                    if (designer) {
                        console.log('디자이너 정보 불러오기 성공:', designer.name);
                        
                        // Step2의 디자이너 정보 업데이트
                        // 아바타 이미지
                        const avatarImg = document.querySelector('.designer-avatar-img');
                        if (avatarImg) {
                            avatarImg.style.backgroundImage = `url(${designer.avatarImage})`;
                        }
                        
                        // 디자이너 이름
                        const designerNameEl = document.querySelector('.designer-name-text');
                        if (designerNameEl) {
                            designerNameEl.textContent = designer.name;
                        }
                        
                        // 디자이너 인스타그램 핸들
                        const designerHandleEl = document.querySelector('.designer-handle');
                        if (designerHandleEl) {
                            designerHandleEl.textContent = designer.handle;
                        }
                        
                        // 팔로워 & 팔로잉 수
                        const followersEl = document.querySelector('.stat-left .stat-number');
                        const followingEl = document.querySelector('.stat-right .stat-number');
                        if (followersEl && designer.stats && designer.stats.followers) {
                            followersEl.textContent = designer.stats.followers;
                        }
                        if (followingEl && designer.stats && designer.stats.following) {
                            followingEl.textContent = designer.stats.following;
                        }
                    } else {
                        console.error('선택한 디자이너를 찾을 수 없습니다:', designerId);
                    }
                })
                .catch(error => {
                    console.error('디자이너 상세 정보를 불러오는 중 오류가 발생했습니다:', error);
                });
        }
    </script>
    


    <!-- Step2 Screen (날짜/시간 선택) -->
    <div class="step2-screen" id="step2Screen">
        <div class="step2-header">
            <button class="back-btn" id="step2BackBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="#1d1d1f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h1 class="step2-title">Choose your time</h1>
        </div>
        
        <!-- 디자이너 정보 박스 -->
        <div class="selected-designer-info">
            <div class="designer-stats">
                <div class="stat-left">
                    <div class="stat-number">23.1M</div>
                    <div class="stat-label">followers</div>
                </div>
                <div class="designer-avatar-center">
                    <div class="designer-avatar-img"></div>
                </div>
                <div class="stat-right">
                    <div class="stat-number">1.1M</div>
                    <div class="stat-label">following</div>
                </div>
            </div>
            
            <div class="designer-profile-info">
                <div class="designer-label">Your designer</div>
                <div class="designer-name-section">
                    <span class="designer-name-text">KANGMOO</span>
                    <svg class="verified-badge" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 0L9.854 2.146L12.847 1.153L13.847 4.153L16.847 5.153L15.854 8.146L16.847 11.847L13.847 12.847L12.847 15.847L9.854 14.854L8 16L6.146 14.854L3.153 15.847L2.153 12.847L-0.847 11.847L0.146 8.146L-0.847 5.153L2.153 4.153L3.153 1.153L6.146 2.146L8 0Z" fill="#007AFF"/>
                        <path d="M5 8L7 10L11 6" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="designer-handle">@Juno_Kangmoo</div>
            </div>
        </div>
        
        <!-- 날짜 선택 섹션 -->
        <div class="date-selector">
            <div class="date-options">
                <div class="date-option" data-date="10">
                    <div class="day-name">Thu</div>
                    <div class="date-number">10</div>
                </div>
                <div class="date-option" data-date="11">
                    <div class="day-name">Fri</div>
                    <div class="date-number">11</div>
                </div>
                <div class="date-option selected" data-date="12">
                    <div class="day-name">Sat</div>
                    <div class="date-number">12</div>
                </div>
                <div class="date-option" data-date="13">
                    <div class="day-name">Sun</div>
                    <div class="date-number">13</div>
                </div>
                <div class="date-option" data-date="14">
                    <div class="day-name">Mon</div>
                    <div class="date-number">14</div>
                </div>
            </div>
        </div>
        
        <!-- 시간 선택 섹션 -->
        <div class="time-selector">
            <div class="time-slots">
                <div class="time-slot" data-time="09:00">09:00</div>
                <div class="time-slot" data-time="09:30">09:30</div>
                <div class="time-slot" data-time="10:00">10:00</div>
                <div class="time-slot" data-time="10:30">10:30</div>
                <div class="time-slot" data-time="11:00">11:00</div>
                <div class="time-slot" data-time="11:30">11:30</div>
                <div class="time-slot" data-time="12:00">12:00</div>
                <div class="time-slot" data-time="12:30">12:30</div>
                <div class="time-slot" data-time="13:00">13:00</div>
                <div class="time-slot" data-time="13:30">13:30</div>
                <div class="time-slot" data-time="14:00">14:00</div>
                <div class="time-slot" data-time="14:30">14:30</div>
                <div class="time-slot" data-time="15:00">15:00</div>
                <div class="time-slot" data-time="15:30">15:30</div>
                <div class="time-slot" data-time="16:00">16:00</div>
                <div class="time-slot" data-time="16:30">16:30</div>
                <div class="time-slot" data-time="17:00">17:00</div>
                <div class="time-slot" data-time="17:30">17:30</div>
            </div>
        </div>
        

    </div>
    
    <!-- Step1.5 Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="designer-modal" id="designerModal">
            <!-- Drag Handle -->
            <div class="modal-handle"></div>
            
            <!-- Designer Profile -->
            <div class="modal-header">
                <div class="designer-profile">
                    <img src="" alt="Designer" class="designer-avatar" id="modalDesignerAvatar">
                    <div class="designer-info">
                        <h2 class="designer-name" id="modalDesignerName">KANGMOO</h2>
                        <p class="designer-handle" id="modalDesignerHandle">@Juno_Kangmoo</p>
                        <div class="designer-stats">
                            <div class="stat">
                                <span class="stat-number">23.1M</span>
                                <span class="stat-label">Followers</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">1.1M</span>
                                <span class="stat-label">Following</span>
                            </div>
                        </div>
                        <button class="follow-btn">Follow</button>
                    </div>
                </div>
            </div>
            
            <!-- Instagram Embed Section -->
            <div class="modal-content">
                <div class="instagram-section">
                    <div class="section-header">
                        <h3>Recent Work</h3>
                        <p>Check out the latest styles from this designer</p>
                    </div>
                    
                    <!-- Instagram Embed Container -->
                    <div id="insta-embed-container" class="instagram-embed-container">
                        <div class="loading-placeholder">
                            <div class="loading-spinner"></div>
                            <p>Loading Instagram post...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modal Continue Button -->
            <div class="modal-footer">
                <button class="modal-continue-btn" id="modalContinueBtn">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // 플로우 리셋 - 모든 이벤트 핸들러와 상태를 다시 작성
        let isTransitioned = false;
        let scrollThreshold = 80;
        
        // 모든 이벤트 리스너 새로 정의하기 위한 변수
        const APP_STATE = {
            currentStep: 'intro', // intro, selection, step1, step1.5, step2
            selectedDesigner: null,
            selectedDate: null,
            selectedTime: null
        };
        
        // UI Elements
        const logo = document.getElementById('logo');
        const introScreen = document.getElementById('introScreen');
        const selectionScreen = document.getElementById('selectionScreen');
        const fromAnovIntro = document.getElementById('fromAnovIntro');
        const scrollIndicator = document.getElementById('scrollIndicator');
        const newUserBtn = document.getElementById('newUserBtn');
        const returningUserBtn = document.getElementById('returningUserBtn');

        // Handle scroll transition
        function handleScroll() {
            const currentScrollY = window.scrollY;
            
            if (!isTransitioned && currentScrollY > scrollThreshold) {
                triggerTransition();
            }
        }

        // Trigger smooth transition
        function triggerTransition() {
            if (isTransitioned) return;
            isTransitioned = true;
            
            // Move logo to top
            logo.classList.add('moved');
            
            // Hide intro elements
            fromAnovIntro.classList.add('hidden');
            scrollIndicator.classList.add('hidden');
            
            // Show selection screen with delay
            setTimeout(() => {
                selectionScreen.classList.add('active');
            }, 250);
        }

        // Touch handling for mobile swipe
        let touchStartY = 0;
        let touchStartTime = 0;
        
        function handleTouchStart(e) {
            touchStartY = e.touches[0].clientY;
            touchStartTime = Date.now();
        }
        
        function handleTouchMove(e) {
            if (isTransitioned) return;
            
            const currentY = e.touches[0].clientY;
            const deltaY = touchStartY - currentY;
            const deltaTime = Date.now() - touchStartTime;
            
            // Upward swipe with sufficient distance and speed
            if (deltaY > 40 && deltaTime < 400) {
                e.preventDefault();
                triggerTransition();
            }
        }

        // Step1 Screen Elements
        const step1Screen = document.getElementById('step1Screen');
        let backBtn = document.getElementById('backBtn');
        const continueBtn = document.getElementById('continueBtn');
        
        // Step1.5 Modal Elements
        const modalOverlay = document.getElementById('modalOverlay');
        const designerModal = document.getElementById('designerModal');
        const modalHandle = document.querySelector('.modal-handle');
        const modalContinueBtn = document.getElementById('modalContinueBtn');
        
        // Modal Elements for updating designer info
        const modalDesignerAvatar = document.getElementById('modalDesignerAvatar');
        const modalDesignerName = document.getElementById('modalDesignerName');
        const modalDesignerHandle = document.getElementById('modalDesignerHandle');

        let selectedDesigner = null;
        let isDragging = false;
        let startY = 0;
        let currentY = 0;
        
        console.log('코드 중복과 버그 수정후 초기화');

        // Button selection handlers
        function handleUserSelection(isNewUser) {
            const selectedBtn = isNewUser ? newUserBtn : returningUserBtn;
            
            // Visual feedback with subtle highlighting
            selectedBtn.style.background = '#f0f0f0';
            selectedBtn.style.borderColor = '#1d1d1f';
            selectedBtn.style.transform = 'scale(0.98)';
            
            setTimeout(() => {
                if (isNewUser) {
                    // Show Step1 screen for new users
                    showStep1Screen();
                } else {
                    // Handle returning user flow
                    console.log('Welcome back! Loading your information...');
                }
                
                // Reset button style
                selectedBtn.style.background = '#ffffff';
                selectedBtn.style.borderColor = '#d1d1d6';
                selectedBtn.style.transform = 'scale(1)';
            }, 150);
        }
        
        // JSON에서 디자이너 데이터 로드 함수
        function loadDesigners() {
            fetch('/assets/designers/designers.json')
                .then(response => response.json())
                .then(data => {
                    // 디자이너 데이터를 전역 변수에 저장
                    designersData = data;
                    
                    // 4층 디자이너 로드
                    const floor4Grid = document.querySelector('#floor4Designers .designers-grid');
                    floor4Grid.innerHTML = ''; // 기존 데이터 삭제
                    
                    // 4층 디자이너 추가
                    data['4F'].forEach(designer => {
                        const designerCard = createDesignerCard(designer);
                        floor4Grid.appendChild(designerCard);
                    });
                    
                    // 3층 디자이너 로드
                    const floor3Grid = document.querySelector('#floor3Designers .designers-grid');
                    floor3Grid.innerHTML = ''; // 기존 데이터 삭제
                    
                    // 3층 디자이너 추가
                    data['3F'].forEach(designer => {
                        const designerCard = createDesignerCard(designer);
                        floor3Grid.appendChild(designerCard);
                    });
                    
                    // 디자이너 카드 클릭 이벤트 추가
                    addDesignerCardEvents();
                    
                    console.log('디자이너 데이터 로드 완료:', designersData);
                })
                .catch(error => {
                    console.error('디자이너 데이터를 불러오는 중 오류가 발생했습니다:', error);
                });
        }
        
        // 디자이너 카드 HTML 생성
        function createDesignerCard(designer) {
            const designerCard = document.createElement('div');
            designerCard.className = 'designer-card';
            designerCard.dataset.designer = designer.id;
            
            // 이니셜 추출 (ex: 'KANGMOO' -> 'KM')
            const nameParts = designer.name.split(' ');
            const initials = nameParts.map(part => part.charAt(0)).join('');
            
            let avatarHtml = '';
            if (designer.avatarImage) {
                avatarHtml = `<img src="${designer.avatarImage}" alt="${designer.name}" class="avatar-image">`;
            } else {
                avatarHtml = `<div class="avatar-placeholder">${initials}</div>`;
            }
            
            designerCard.innerHTML = `
                <div class="designer-avatar">
                    ${avatarHtml}
                </div>
                <div class="designer-info">
                    <div class="designer-name">${designer.name}</div>
                    <div class="designer-instagram">${designer.handle}</div>
                </div>
            `;
            
            return designerCard;
        }
        
        // 디자이너 카드 클릭 이벤트 추가 (기존 이벤트 제거 방지)
        function addDesignerCardEvents() {
            // 기존 이벤트 리스너를 제거하기 위해 새 카드로 교체
            const designerCards = document.querySelectorAll('.designer-card');
            designerCards.forEach(card => {
                const newCard = card.cloneNode(true);
                card.parentNode.replaceChild(newCard, card);
                
                // 새로운 클릭 이벤트
                newCard.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const designerId = this.getAttribute('data-designer');
                    selectDesigner(designerId);
                    console.log('디자이너 카드 클릭:', designerId);
                });
            });
        }
        
        // 페이지 로드시 디자이너 데이터 불러오기
        // 페이지 초기 상태 설정 함수
        function initializeIntroState() {
            console.log('Initializing intro state');
            
            // 전역 상태 초기화
            selectedDesigner = null;
            isTransitioned = false;
            
            // Step1 화면 숨김 (CSS로 처리되도록 함)
            const step1Screen = document.getElementById('step1Screen');
            if (step1Screen) {
                step1Screen.classList.remove('active');
            }
            
            // 로고 초기 상태
            const logo = document.getElementById('logo');
            if (logo) {
                logo.classList.remove('moved');
            }
            
            // 디자이너 카드 선택 상태 초기화
            const designerCards = document.querySelectorAll('.designer-card');
            designerCards.forEach(card => {
                card.classList.remove('selected');
            });
            
            // Continue 버튼 숨김
            const continueBar = document.querySelector('.continue-bar');
            if (continueBar) {
                continueBar.classList.remove('show-bar');
                continueBar.classList.add('hidden-bar');
            }
            
            // 스크롤 위치 초기화
            window.scrollTo(0, 0);
            
            console.log('Intro state initialized (minimal)');
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            // 디자이너 데이터 로드
            loadDesigners();
            
            console.log('Page loaded - intro should work normally');
        });
        
        // 중복된 loadDesignerDetails 함수 제거 - 아래에 올바른 버전이 있음
        
        // Show Step1 Screen
        function showStep1Screen() {
            step1Screen.classList.add('active');
            // Hide all background screens completely
            const introScreen = document.querySelector('.intro-screen');
            const selectionScreen = document.querySelector('.selection-screen');
            
            if (introScreen) {
                introScreen.style.display = 'none';
            }
            if (selectionScreen) {
                selectionScreen.style.display = 'none';
            }
            
            // step1-footer는 step1-screen의 일부로 자동으로 함께 표시/숨김 처리됨
        }
        
        // Hide Step1 Screen (back to intro)
        function hideStep1Screen() {
            console.log('hideStep1Screen called - refreshing page for clean state');
            
            // 페이지 새로고침
            window.location.reload();
            
            // 새로고침이 즉시 실행되지 않을 경우를 대비한 코드(실행될 가능성 낮음)
            console.log('Page refresh requested - returning to initial state');
        }
        
        // 디자이너 선택 함수
        function selectDesigner(designerId) {
            console.log('호출됨: selectDesigner() with ID:', designerId);
            
            // 모든 디자이너 카드 선택 해제
            document.querySelectorAll('.designer-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // 선택한 디자이너 카드 선택 표시
            const selectedCard = document.querySelector(`.designer-card[data-designer="${designerId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // 중요: 이전에 선택한 디자이너가 있는지 확인 및 디버깅
            const previousDesigner = selectedDesigner;
            console.log('이전 디자이너:', previousDesigner, '새 디자이너:', designerId);
            
            // 선택한 디자이너 ID 저장
            selectedDesigner = designerId;
            
            // Continue 버튼 활성화
            if (continueBtn) {
                continueBtn.disabled = false;
            }
        }
        
        // Step1.5 Modal Functions
        function openDesignerModal() {
            if (!selectedDesigner) return;
            
            // Update modal with selected designer info
            updateModalDesignerInfo();
            
            // Show modal
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeDesignerModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function updateModalDesignerInfo() {
            if (!selectedDesigner) return;
            
            // selectedDesigner는 이제 ID이므로, 전체 디자이너 데이터에서 찾아야 함
            const designerData = findDesignerById(selectedDesigner);
            if (!designerData) {
                console.error('디자이너 데이터를 찾을 수 없습니다:', selectedDesigner);
                return;
            }
            
            // Update modal content with selected designer
            modalDesignerName.textContent = designerData.name;
            modalDesignerHandle.textContent = designerData.handle;
            
            // Set designer avatar
            if (designerData.avatarImage) {
                modalDesignerAvatar.src = designerData.avatarImage;
            } else {
                modalDesignerAvatar.src = '/assets/designers/default.jpg';
            }
            modalDesignerAvatar.onerror = function() {
                this.src = '/assets/designers/default.jpg';
            };
            
            // Load Instagram embed if available
            if (designerData.instagram && designerData.instagram.postUrl) {
                loadInstagramEmbed(designerData.instagram.postUrl);
            } else {
                // 인스타그램 데이터가 없을 경우 기본 메시지 표시
                showInstagramFallback();
            }
        }
        
        // 디자이너 데이터 저장용 전역 변수
        let designersData = { '3F': [], '4F': [] };
        
        // ID로 디자이너 찾기
        function findDesignerById(designerId) {
            // 3층에서 찾기
            let designer = designersData['3F'].find(d => d.id === designerId);
            if (designer) return designer;
            
            // 4층에서 찾기
            designer = designersData['4F'].find(d => d.id === designerId);
            return designer;
        }
        
        // Instagram 임베드 직접 생성 (API 호출 대신)
        function loadInstagramEmbed(postUrl) {
            const container = document.getElementById('insta-embed-container');
            if (!container) return;
            
            // 로딩 상태 표시
            container.innerHTML = `
                <div class="loading-placeholder">
                    <div class="loading-spinner"></div>
                    <p>Loading Instagram post...</p>
                </div>
            `;
            
            try {
                // URL에서 포스트 ID 추출
                const postId = extractPostIdFromUrl(postUrl);
                if (!postId) {
                    throw new Error('Invalid Instagram post URL');
                }
                
                // 직접 인스타그램 임베드 코드 생성
                const embedHtml = generateInstagramEmbed(postUrl, postId);
                container.innerHTML = embedHtml;
                
                // Instagram embed.js로 렌더링 트리거
                if (window.instgrm) {
                    setTimeout(() => {
                        window.instgrm.Embeds.process();
                        console.log('Instagram embed processed');
                    }, 200);
                } else {
                    console.warn('Instagram embed.js not loaded yet');
                }
                
                console.log('Instagram embed added to DOM');
            } catch (error) {
                console.error('Instagram embed loading failed:', error);
                showInstagramFallback('Failed to load Instagram post');
            }
        }
        
        // URL에서 Instagram 포스트 ID 추출
        function extractPostIdFromUrl(url) {
            try {
                // 정규식으로 instagram.com/p/POSTID/ 패턴에서 POSTID 추출
                const match = url.match(/instagram\.com\/p\/([\w-]+)/);
                return match ? match[1] : null;
            } catch (e) {
                console.error('Error extracting post ID:', e);
                return null;
            }
        }
        
        // 인스타그램 임베드 HTML 직접 생성
        function generateInstagramEmbed(postUrl, postId) {
            return `
                <blockquote 
                    class="instagram-media" 
                    data-instgrm-permalink="${postUrl}" 
                    data-instgrm-version="14" 
                    style="background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
                    <div style="padding:16px;">
                        <a href="${postUrl}" style="background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;" target="_blank">
                            <div style="display: flex; flex-direction: row; align-items: center;">
                                <div style="background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;"></div>
                                <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center;">
                                    <div style="background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;"></div>
                                    <div style="background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;"></div>
                                </div>
                            </div>
                            <div style="padding: 19% 0;"></div>
                            <div style="display:block; height:50px; margin:0 auto 12px; width:50px;">
                                <svg width="50px" height="50px" viewBox="0 0 60 60" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g transform="translate(-511.000000, -20.000000)" fill="#000000">
                                            <g>
                                                <path d="M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div style="padding-top: 8px;">
                                <div style="color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;">View this post on Instagram</div>
                            </div>
                            <div style="padding: 12.5% 0;"></div>
                            <div style="display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;">
                                <div>
                                    <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);"></div>
                                    <div style="background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;"></div>
                                    <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);"></div>
                                </div>
                                <div style="margin-left: 8px;">
                                    <div style="background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;"></div>
                                    <div style="width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)"></div>
                                </div>
                                <div style="margin-left: auto;">
                                    <div style="width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);"></div>
                                    <div style="background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);"></div>
                                    <div style="width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);"></div>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;">
                                <div style="background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;"></div>
                                <div style="background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;"></div>
                            </div>
                        </a>
                    </div>
                </blockquote>
            `;
        }
        
        // Instagram embed 대체 콘텐츠 표시
        function showInstagramFallback(errorMessage = 'Instagram content not available') {
            const container = document.getElementById('insta-embed-container');
            if (!container) return;
            
            container.innerHTML = `
                <div class="instagram-fallback">
                    <div class="fallback-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="#999" stroke-width="2"/>
                            <path d="m9 9 5 3-5 3z" fill="#999"/>
                        </svg>
                    </div>
                    <h4>Recent Work</h4>
                    <p>${errorMessage}</p>
                    <small>Check back later for updates</small>
                </div>
            `;
        }
        
        // Modal Drag Functionality
        function handleDragStart(e) {
            isDragging = true;
            startY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;
            currentY = startY;
            modalHandle.style.cursor = 'grabbing';
        }
        
        function handleDragMove(e) {
            if (!isDragging) return;
            
            e.preventDefault();
            currentY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;
            const deltaY = currentY - startY;
            
            if (deltaY > 0) {
                const progress = Math.min(deltaY / (window.innerHeight * 0.3), 1);
                designerModal.style.transform = `translateY(${deltaY}px)`;
                modalOverlay.style.opacity = 1 - (progress * 0.5);
            }
        }
        
        function handleDragEnd() {
            if (!isDragging) return;
            
            isDragging = false;
            modalHandle.style.cursor = 'grab';
            
            const deltaY = currentY - startY;
            const threshold = window.innerHeight * 0.3;
            
            if (deltaY > threshold) {
                closeDesignerModal();
            } else {
                // Snap back
                designerModal.style.transform = 'translateY(0)';
                modalOverlay.style.opacity = '1';
            }
        }
        
        // Save designer data to localStorage for step2.html
        function saveDesignerData() {
            if (selectedDesigner) {
                const designerData = {
                    id: selectedDesigner,
                    name: selectedDesigner.toUpperCase(),
                    handle: `@Juno_${selectedDesigner}`,
                    avatar: `/assets/designers/${selectedDesigner.toLowerCase()}.jpg`,
                    timestamp: Date.now()
                };
                localStorage.setItem('selectedDesigner', JSON.stringify(designerData));
            }
        }

        // Event Listeners
        window.addEventListener('scroll', handleScroll, { passive: true });
        window.addEventListener('touchstart', handleTouchStart, { passive: true });
        window.addEventListener('touchmove', handleTouchMove, { passive: false });
        
        newUserBtn.addEventListener('click', () => handleUserSelection(true));
        returningUserBtn.addEventListener('click', () => handleUserSelection(false));
        
        // Step1 Continue Button Event
        if (continueBtn) {
            continueBtn.addEventListener('click', function() {
                if (selectedDesigner) {
                    openDesignerModal();
                }
            });
        }
        
        // Modal Event Listeners
        if (modalOverlay) {
            // Close modal when clicking overlay
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeDesignerModal();
                }
            });
        }
        
        // Modal Drag Events
        if (modalHandle) {
            // Mouse events
            modalHandle.addEventListener('mousedown', handleDragStart);
            document.addEventListener('mousemove', handleDragMove);
            document.addEventListener('mouseup', handleDragEnd);
            
            // Touch events
            modalHandle.addEventListener('touchstart', handleDragStart, { passive: false });
            document.addEventListener('touchmove', handleDragMove, { passive: false });
            document.addEventListener('touchend', handleDragEnd);
        }
        
        // Modal Continue Button Event
        if (modalContinueBtn) {
            modalContinueBtn.addEventListener('click', function() {
                if (selectedDesigner) {
                    saveDesignerData();
                    window.location.href = 'step2.html';
                }
            });
        }
        
        // 화면 전환 머신
        let CURRENT_SCREEN = 'intro'; // intro, selection, step1, step2
        
        // Step1 Screen Event Listeners
        if (backBtn) {
            backBtn.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Back button clicked'); // 디버깅용
                hideStep1Screen();
            });
        }

        // Step2 Elements
        const step2Screen = document.getElementById('step2Screen');
        const step2BackBtn = document.getElementById('step2BackBtn');

        
        // Step2 Selection State
        let selectedDate = '12'; // Default selected
        let selectedTime = null;
        
        // Update Step2 with selected designer info
        function updateStep2DesignerInfo() {
            const designerNameText = document.querySelector('.designer-name-text');
            const designerHandle = document.querySelector('.designer-handle');
            
            if (selectedDesigner && designerNameText && designerHandle) {
                designerNameText.textContent = selectedDesigner.toUpperCase();
                designerHandle.textContent = `@Juno_${selectedDesigner}`;
            }
        }
        
        // Step1에서 Step2로 전환
        function transitionToStep2() {
            console.log('호출: transitionToStep2() - 디버깅');
            
            // Step1 화면의 active 클래스 제거
            if (step1Screen) {
                step1Screen.classList.remove('active');
                console.log('Step1 화면 비활성화');
            }
            
            // step1-screen의 active 클래스가 제거되면서 step1-footer도 함께 숨겨짐
            // step1-footer는 step1-screen의 일부이미로 별도 처리 불필요
            
            // Update designer info in Step2
            updateStep2DesignerInfo();
            
            // Step2 화면만 활성화
            if (step2Screen) {
                // Step2 화면 보이기
                step2Screen.classList.add('active');
                console.log('Step2 화면 활성화');
            } else {
                console.error('step2Screen element not found');
                return; // 엘리먼트가 없으면 여기서 중단
            }
                
            // 디버깅
            console.log('완료: Step2로 전환');
        }
        
        // Go back to Step1 from Step2
        function backToStep1() {
            step2Screen.classList.remove('active');
            step1Screen.classList.add('active');
            
            // Log debug message
            console.log('Step2에서 Step1으로 돌아감');
        }
        
        // Step2 Event Listeners
        step2BackBtn.addEventListener('click', () => {
            backToStep1();
        });
        
        // Date selection
        const dateOptions = document.querySelectorAll('.date-option');
        dateOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remove previous selection
                dateOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selection to clicked option
                option.classList.add('selected');
                selectedDate = option.dataset.date;
                
                console.log('Selected date:', selectedDate);
                checkStep2Completion();
            });
        });
        
        // Time selection
        const timeSlots = document.querySelectorAll('.time-slot');
        timeSlots.forEach(slot => {
            slot.addEventListener('click', () => {
                if (slot.classList.contains('unavailable')) return;
                
                // Remove previous selection
                timeSlots.forEach(s => s.classList.remove('selected'));
                
                // Add selection to clicked slot
                slot.classList.add('selected');
                selectedTime = slot.dataset.time;
                
                console.log('Selected time:', selectedTime);
                checkStep2Completion();
            });
        });
        

        
        const termsLink = document.getElementById('termsLink');
        const privacyLink = document.getElementById('privacyLink');
        
        termsLink.addEventListener('click', (e) => {
            e.preventDefault();
            console.log('Terms of Use clicked');
        });
        
        privacyLink.addEventListener('click', (e) => {
            e.preventDefault();
            console.log('Privacy Policy clicked');
        });

        // Prevent bounce scrolling on iOS
        document.addEventListener('touchmove', (e) => {
            if (e.target.closest('.selection-screen')) {
                e.preventDefault();
            }
        }, { passive: false });

        // Returning User Flow Functions
        let currentUserData = null;
        let previousDesignerData = null;
        
        // Mock previous booking data - in real app, this would come from backend
        const mockUserBookings = {
            'user@example.com': {
                name: 'Jason Lee',
                previousDesigner: {
                    id: 'designer_1',
                    name: 'RICHARDHSON',
                    avatarImage: '/assets/designers/designer1_avatar.jpg',
                    followers: '25.1M',
                    following: '1.1M',
                    styleThumbnails: [
                        '/assets/styles/style1.jpg',
                        '/assets/styles/style2.jpg',
                        '/assets/styles/style3.jpg',
                        '/assets/styles/style4.jpg',
                        '/assets/styles/style5.jpg',
                        '/assets/styles/style6.jpg'
                    ],
                    previousPrice: 50000
                }
            }
        };
        
        // Show Step 0.5 (Welcome back screen)
        function showStep05Screen() {
            const step05Screen = document.getElementById('step05Screen');
            // Hide other screens
            hideAllScreens();
            step05Screen.classList.add('active');
            console.log('Step 0.5 (Welcome back) screen shown');
        }
        
        // Show Returning Step1 (Previous designer screen)
        function showReturningStep1Screen() {
            const returningStep1Screen = document.getElementById('returningStep1Screen');
            hideAllScreens();
            returningStep1Screen.classList.add('active');
            
            // Update user info
            if (currentUserData) {
                document.getElementById('userNameSpan').textContent = currentUserData.name;
                
                if (currentUserData.previousDesigner) {
                    const designer = currentUserData.previousDesigner;
                    document.getElementById('previousDesignerName').textContent = designer.name;
                    document.getElementById('previousDesignerFollowers').textContent = designer.followers + ' followers';
                    document.getElementById('previousDesignerFollowing').textContent = designer.following + ' following';
                    document.getElementById('previousDesignerAvatar').style.backgroundImage = `url(${designer.avatarImage})`;
                }
            }
            
            console.log('Returning Step1 screen shown');
        }
        
        // Show Returning Step3 (Style selection screen)
        function showReturningStep3Screen() {
            const returningStep3Screen = document.getElementById('returningStep3Screen');
            hideAllScreens();
            returningStep3Screen.classList.add('active');
            
            // Update designer info
            if (currentUserData && currentUserData.previousDesigner) {
                const designer = currentUserData.previousDesigner;
                document.getElementById('step3DesignerName').textContent = designer.name;
                document.getElementById('step3DesignerAvatar').style.backgroundImage = `url(${designer.avatarImage})`;
                
                // Populate style gallery
                const styleGallery = document.getElementById('styleGallery');
                styleGallery.innerHTML = '';
                
                designer.styleThumbnails.forEach(thumb => {
                    const div = document.createElement('div');
                    div.className = 'style-thumbnail';
                    div.style.backgroundImage = `url(${thumb})`;
                    styleGallery.appendChild(div);
                });
            }
            
            console.log('Returning Step3 screen shown');
        }
        
        // Hide all screens
        function hideAllScreens() {
            const screens = [
                'introScreen', 'selectionScreen', 'step1Screen', 'step05Screen', 
                'returningStep1Screen', 'returningStep3Screen'
            ];
            
            screens.forEach(screenId => {
                const screen = document.getElementById(screenId);
                if (screen) {
                    screen.classList.remove('active');
                }
            });
        }
        
        // Google OAuth Login Implementation
        let isLoginInProgress = false;
        let googleInitialized = false;
        
        // Initialize Google OAuth when page loads
        function initializeGoogleOAuth() {
            if (googleInitialized) return;
            
            // Wait for Google API to load
            if (typeof google === 'undefined') {
                setTimeout(initializeGoogleOAuth, 100);
                return;
            }
            
            try {
                google.accounts.id.initialize({
                    client_id: '879959067617-hm3s3d8ivmrll13nfo2uuduk8nn99jfb.apps.googleusercontent.com',
                    callback: handleGoogleLoginResponse,
                    auto_select: false,
                    cancel_on_tap_outside: true,
                    context: 'signin',
                    ux_mode: 'popup',
                    login_uri: window.location.origin
                });
                
                googleInitialized = true;
                console.log('Google OAuth initialized successfully');
                
            } catch (error) {
                console.error('Failed to initialize Google OAuth:', error);
                setTimeout(initializeGoogleOAuth, 1000); // Retry after 1 second
            }
        }
        
        function handleGoogleLogin() {
            if (isLoginInProgress) {
                console.log('Login already in progress');
                return;
            }
            
            if (!googleInitialized) {
                console.log('Google OAuth not initialized yet, initializing...');
                initializeGoogleOAuth();
                setTimeout(handleGoogleLogin, 500); // Retry after initialization
                return;
            }
            
            isLoginInProgress = true;
            
            try {
                // Show loading state
                const googleLoginBtn = document.getElementById('googleLoginBtn');
                if (googleLoginBtn) {
                    googleLoginBtn.textContent = '로그인 중...';
                    googleLoginBtn.disabled = true;
                }
                
                // Request Google login
                google.accounts.id.prompt((notification) => {
                    console.log('Google prompt notification:', notification);
                    
                    if (notification.isNotDisplayed()) {
                        console.log('Google One Tap not displayed, falling back to popup');
                        // Fallback to renderButton approach
                        showGoogleSignInButton();
                    } else if (notification.isSkippedMoment()) {
                        console.log('Google One Tap skipped');
                        resetLoginButton();
                        isLoginInProgress = false;
                    }
                });
                
            } catch (error) {
                console.error('Error during Google login:', error);
                handleLoginError();
            }
        }
        
        function showGoogleSignInButton() {
            // Create a temporary container for Google sign-in button
            const tempDiv = document.createElement('div');
            tempDiv.id = 'tempGoogleSignIn';
            tempDiv.style.position = 'fixed';
            tempDiv.style.top = '50%';
            tempDiv.style.left = '50%';
            tempDiv.style.transform = 'translate(-50%, -50%)';
            tempDiv.style.zIndex = '10000';
            tempDiv.style.background = 'white';
            tempDiv.style.padding = '20px';
            tempDiv.style.borderRadius = '10px';
            tempDiv.style.boxShadow = '0 4px 20px rgba(0,0,0,0.3)';
            
            document.body.appendChild(tempDiv);
            
            google.accounts.id.renderButton(tempDiv, {
                theme: 'outline',
                size: 'large',
                text: 'signin_with',
                shape: 'rectangular',
                logo_alignment: 'left'
            });
            
            // Add close button
            const closeBtn = document.createElement('button');
            closeBtn.textContent = '닫기';
            closeBtn.style.marginTop = '10px';
            closeBtn.style.width = '100%';
            closeBtn.style.padding = '8px';
            closeBtn.style.backgroundColor = '#f1f3f4';
            closeBtn.style.border = 'none';
            closeBtn.style.borderRadius = '4px';
            closeBtn.style.cursor = 'pointer';
            
            closeBtn.onclick = () => {
                document.body.removeChild(tempDiv);
                resetLoginButton();
                isLoginInProgress = false;
            };
            
            tempDiv.appendChild(closeBtn);
        }
        
        function handleGoogleLoginResponse(response) {
            try {
                console.log('Google login response received');
                
                // Remove temp sign-in button if exists
                const tempDiv = document.getElementById('tempGoogleSignIn');
                if (tempDiv) {
                    document.body.removeChild(tempDiv);
                }
                
                // Decode JWT token
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                console.log('Google login successful:', payload);
                
                // Use the actual user data from Google
                currentUserData = {
                    name: payload.name,
                    email: payload.email,
                    picture: payload.picture,
                    // For demo, assign mock previous designer data
                    previousDesigner: mockUserBookings['user@example.com'].previousDesigner
                };
                
                // Also check if user has actual previous booking data
                if (mockUserBookings[payload.email]) {
                    currentUserData.previousDesigner = mockUserBookings[payload.email].previousDesigner;
                }
                
                resetLoginButton();
                isLoginInProgress = false;
                
                // Show returning step1 screen
                showReturningStep1Screen();
                
            } catch (error) {
                console.error('Error processing Google login response:', error);
                handleLoginError();
            }
        }
        
        function resetLoginButton() {
            const googleLoginBtn = document.getElementById('googleLoginBtn');
            if (googleLoginBtn) {
                googleLoginBtn.textContent = 'Google로 로그인';
                googleLoginBtn.disabled = false;
            }
        }
        
        function handleLoginError() {
            resetLoginButton();
            isLoginInProgress = false;
            alert('로그인 처리 중 오류가 발생했습니다. 다시 시도해주세요.');
        }

        
        // Continue to Step2 with selected designer
        function continueToStep2WithPreviousDesigner() {
            if (currentUserData && currentUserData.previousDesigner) {
                // Save designer data to localStorage
                localStorage.setItem('selectedDesigner', JSON.stringify(currentUserData.previousDesigner));
                localStorage.setItem('returningUser', 'true');
                
                // Navigate to step2.html
                window.location.href = '/step2.html';
            }
        }
        
        // Event Listeners for Returning User Flow
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Google OAuth
            setTimeout(initializeGoogleOAuth, 500);
            
            // Returning user button click
            const returningUserBtn = document.getElementById('returningUserBtn');
            if (returningUserBtn) {
                returningUserBtn.addEventListener('click', () => {
                    showStep05Screen();
                });
            }
            
            // Google login button
            const googleLoginBtn = document.getElementById('googleLoginBtn');
            if (googleLoginBtn) {
                googleLoginBtn.addEventListener('click', handleGoogleLogin);
            }
            
            // Back buttons
            const backBtnReturning = document.getElementById('backBtnReturning');
            if (backBtnReturning) {
                backBtnReturning.addEventListener('click', () => {
                    showStep05Screen();
                });
            }
            
            const backBtnReturningStep3 = document.getElementById('backBtnReturningStep3');
            if (backBtnReturningStep3) {
                backBtnReturningStep3.addEventListener('click', () => {
                    showReturningStep1Screen();
                });
            }
            
            // See more designers button
            const seeMoreDesignersBtn = document.getElementById('seeMoreDesignersBtn');
            if (seeMoreDesignersBtn) {
                seeMoreDesignersBtn.addEventListener('click', () => {
                    // Show regular designer selection screen
                    showStep1Screen();
                });
            }
            
            // Continue with designer button
            const continueWithDesignerBtn = document.getElementById('continueWithDesignerBtn');
            if (continueWithDesignerBtn) {
                continueWithDesignerBtn.addEventListener('click', () => {
                    showReturningStep3Screen();
                });
            }
            
            // Continue to booking button
            const continueToBookingBtn = document.getElementById('continueToBookingBtn');
            if (continueToBookingBtn) {
                continueToBookingBtn.addEventListener('click', () => {
                    continueToStep2WithPreviousDesigner();
                });
            }
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Smooth entrance animation
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>
